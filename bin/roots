#!/usr/bin/env node

var fs = require('fs');
var path = require('path');
var colors = require('colors');
var watch = require('watch');
var coffeescript = require('../lib/compilers/coffee');

var current_directory = path.normalize(process.cwd());
var dir_contents = fs.readdirSync(current_directory);
var get_files = function(dir){ return fs.readdirSync(path.join(current_directory, dir)); }

// make sure this is a roots project

if (dir_contents.indexOf('app.coffee') > 0) {
  // console.log('we have a legit app'.green);
} else {
  // console.log('looks like youre missing the app.js file, try running roots new `name` to create a new project'.red);
}

// compile all the things!
coffeescript.compile(get_files('assets/js'));

// serve to public and open the browser

// create a watch task that does this on file change

// create a websockets server to interact with livereload and push changes live